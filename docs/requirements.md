# 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名

mcpax

### 1.2 目的

Minecraft の MOD / Shader / Resource Pack 管理を効率化するツール。Modrinth API を利用して、指定した Minecraft バージョン・Mod Loader に対応するプロジェクトを一括でダウンロード・更新する。

### 1.3 背景

- Minecraft のバージョンアップが頻繁で、手動での MOD 更新が煩雑
- 約30個のプロジェクトを Modrinth サイトで1つずつ検索・確認するのは時間がかかる
- TOML ファイルで管理対象を定義し、コマンド一発で更新したい

### 1.4 対象ユーザー

- 自分自身（開発者本人）

## 2. 機能要件

### 2.1 プロジェクトリスト管理

| ID | 機能 | 説明 | 優先度 |
|----|------|------|--------|
| F-001 | プロジェクトリスト読み込み | TOML 形式のプロジェクトリストファイルを読み込む | 必須 |
| F-002 | プロジェクト追加 | リストに新しいプロジェクトを追加する | 必須 |
| F-003 | プロジェクト削除 | リストからプロジェクトを削除する | 必須 |
| F-004 | バージョン固定 | 特定のプロジェクトを指定バージョンに固定する | 任意 |

### 2.2 Modrinth API 連携

| ID | 機能 | 説明 | 優先度 |
|----|------|------|--------|
| F-010 | プロジェクト検索 | slug またはキーワードでプロジェクトを検索する | 必須 |
| F-011 | プロジェクト情報取得 | プロジェクトの詳細情報を取得する | 必須 |
| F-012 | バージョン一覧取得 | 指定条件に合うバージョン一覧を取得する | 必須 |
| F-013 | 対応状況確認 | 指定 MC バージョン・Loader への対応を確認する | 必須 |

### 2.3 ダウンロード・インストール

| ID | 機能 | 説明 | 優先度 |
|----|------|------|--------|
| F-020 | プロジェクトダウンロード | ファイルを適切なフォルダにダウンロードする | 必須 |
| F-021 | 一括ダウンロード | リスト内の全プロジェクトを一括でダウンロードする | 必須 |
| F-022 | 更新確認 | インストール済みプロジェクトの更新有無を確認する | 必須 |
| F-023 | 差分更新 | 更新があるプロジェクトのみダウンロードする | 必須 |
| F-024 | バックアップ | 更新前に古いファイルをバックアップする | 必須 |
| F-025 | 種別判定・配置 | project_type に応じて適切なディレクトリに配置する | 必須 |

### 2.4 設定管理

| ID | 機能 | 説明 | 優先度 |
|----|------|------|--------|
| F-030 | 設定ファイル読み込み | TOML 形式の設定ファイルを読み込む | 必須 |
| F-031 | MC バージョン指定 | 対象の Minecraft バージョンを指定する | 必須 |
| F-032 | Loader 指定 | Mod Loader（Fabric）を指定する | 必須 |
| F-033 | ディレクトリ指定 | mods / shaderpacks / resourcepacks の配置先を指定する | 必須 |

### 2.5 ユーザーインターフェース

| ID | 機能 | 説明 | 優先度 |
|----|------|------|--------|
| F-040 | CLI | コマンドラインインターフェース | 必須 |
| F-041 | TUI（Textual） | ターミナル UI | 任意 |

## 3. 非機能要件

### 3.1 パフォーマンス

| ID | 要件 | 目標値 |
|----|------|--------|
| NF-001 | API レスポンス | 1 リクエストあたり 3 秒以内 |
| NF-002 | 並列ダウンロード | 最大 5 並列でダウンロード |
| NF-003 | レートリミット遵守 | Modrinth API の制限（300 req/min）を遵守 |

### 3.2 信頼性

| ID | 要件 | 説明 |
|----|------|------|
| NF-010 | エラーハンドリング | API エラー、ネットワークエラーを適切に処理 |
| NF-011 | リトライ | 一時的なエラー時は自動リトライ |
| NF-012 | 整合性チェック | ダウンロードファイルのハッシュ検証 |

### 3.3 保守性

| ID | 要件 | 説明 |
|----|------|------|
| NF-020 | モジュール分離 | core / CLI / TUI を明確に分離 |
| NF-021 | 型ヒント | 全てのコードに型ヒントを付与 |
| NF-022 | テスト | 主要機能のユニットテストを作成 |

### 3.4 互換性

| ID | 要件 | 説明 |
|----|------|------|
| NF-030 | Python バージョン | Python 3.13 以上 |
| NF-031 | OS | macOS, Linux, Windows |

## 4. 制約事項

- Modrinth API v2 を使用する
- 認証が必要な操作（プロジェクト作成等）は対象外
- Fabric Loader のみを対象とする（将来的に他 Loader 対応も検討）
- 依存関係の自動解決は将来の拡張として検討

## 5. 用語定義

| 用語 | 定義 |
|------|------|
| Project | Modrinth における MOD やシェーダー、リソースパック等のコンテンツ |
| MOD | Minecraft の拡張機能 |
| Shader | 描画を変更するシェーダーパック |
| Resource Pack | テクスチャや音声を変更するリソースパック |
| Loader | MOD を読み込む基盤（Fabric, Forge, NeoForge 等） |
| slug | Modrinth 上のプロジェクト識別子（URL に使われる短い名前） |
| Version | Project の特定リリース（ファイルを含む） |
